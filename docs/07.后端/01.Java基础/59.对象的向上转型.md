---
title: 对象的向上转型
tags: java
sidebar: auto
date: 2022-01-12 17:56:18
permalink: /pages/1d6a99/
categories: 
  - 后端
  - Java基础
  - Java
---
# 对象的向上转型
对象的向上转型其实就是多态写法,父类引用指向子类对象
格式: 父类名称 对象名 = new 子类名称();  
含义: 右侧创建一个子类对象,把他当做父类来看待使用

``` java
Animal animal = new Cat()
// 创建一只猫,当做动物看待
```
::: tip 注意事项
向上转型一定是安全的,从小范围转向大范围
但是也有一个弊端,一旦向上转型为父类,那么就无法调用子类特有方法
解决方案,用对象的向下转型,还原
:::

# 对象的向下转型
对象的向下转型其实是一个还原的动作
格式:子类名称 对象名 = (子类名称) 父类对象;
含义:将父类对象,还原成本来的子类对象
``` java
Animal animal = new Cat(); // 向上转型
// 创建一只猫,当做动物看待,本来是猫,向上转型为动物
Cat cat = (Cat) animal; // 向下转型
// 本来是猫,已经被当做动物了,还原回来成为本来的猫
// 注意: 必须保证对象本来创建的时候,就是猫,才能向下转型成为猫,如果对象创建的时候本来不是猫,向下转型为猫就会报错
// 向下转换类似于基本数据类型的强制转换,例如: int num = (int) 10.0 可以,int num = (int) 10.5  不可以,精度损失
```
## 如何才能知道一个父类引用的对象,本来是什么子类?

### 使用instanceof
格式: 对象 instanceof 类名称
将得到一个布尔值结果,也就是判断前面的对象能不能当做后面类型的实例
``` java
Animal animal = new Cat(); // 向上转型
animal instanceof Cat // 判断前面的对象能不能当做后面类型的实例
```

 实际用处,在传参的时候,不知道会被传进来什么参数,可以直接写成父类,通过多态的形式创建的类,都可以传递进来,`而且参数会自动向上转型`
 子类对象可以被看做父类